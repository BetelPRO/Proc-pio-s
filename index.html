<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sacola de Compras - Açaiteria</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      width: 100%;
      min-height: 100vh;
      box-sizing: border-box;
      font-size: clamp(1rem, 4vw, 1.5rem); /* texto responsivo */
      background: #fff;
    }

    body {
      padding: 5vw;
      max-width: 700px;
      margin: 0 auto;
    }

    h2, h3, h4 {
      margin-top: 2em;
      font-size: clamp(1.4rem, 5vw, 2rem);
    }

    .grupo {
      margin-bottom: 2em;
    }

    label {
      display: block;
      margin-bottom: 0.8em;
      font-size: 1em;
    }

    input[type="number"],
    button {
      font-size: clamp(1rem, 4vw, 1.2rem);
      padding: 10px;
      width: 100%;
      box-sizing: border-box;
    }

    button {
      margin-top: 1em;
      cursor: pointer;
    }

    ul {
      padding-left: 1em;
    }

    #acompanhamentos h4 {
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }

    .espaco {
      margin-bottom: 2em;
    }
    img { width: 70%;}
  </style>
</head>
<body>

  <img src="procopios.png" alt="">

  <div class="grupo">
    <h3>Produto</h3>
    <div id="produtos"></div>
    <label for="quantidade">Quantidade:</label>
    <input type="number" min="1" max="10" id="quantidade" value="1">
  </div>

  <div class="grupo" id="acompanhamentos" style="display: none;">
    <h3>Acompanhamentos</h3>
  </div>

  <button onclick="adicionarItens()">Adicionar à Sacola</button>
  <button onclick="fecharPedido()">Fechar Pedido</button>
  <button onclick="recomecar()">Recomeçar</button>

  <div id="resumo" class="grupo">
    <h3>Sacola de Compras:</h3>
    <ul id="lista-sacola"></ul>
  </div>

  <div id="pedido-finalizado" style="display:none">
    <h3>Pedido Finalizado:</h3>
    <div id="detalhes-pedido"></div>
    <button onclick="recomecar()">Recomeçar</button>
  </div>

  <script>
    const sacola = [];

    const precos = {
      'Açaí 300ml': 7,
      'Açaí 400ml': 8,
      'Açaí 500ml': 10,
      'Açaí com Cupuaçu 300ml': 10,
      'Açaí com Cupuaçu 400ml': 11,
      'Açaí com Cupuaçu 500ml': 13,
      'Cupuaçu 300ml': 10,
      'Cupuaçu 400ml': 11,
      'Cupuaçu 500ml': 13,
      'Rubra': 13,
      'Sicília': 13,
      'Solis': 13,
      'Ninho 400ml': 15,
      'Ninho 500ml': 15,
      'Belga': 15,
      'Áurea': 14
    };

    const produtosComAcompanhamentos = [
      'Açaí 300ml', 'Açaí 400ml', 'Açaí 500ml',
      'Açaí com Cupuaçu 300ml', 'Açaí com Cupuaçu 400ml', 'Açaí com Cupuaçu 500ml',
      'Cupuaçu 300ml', 'Cupuaçu 400ml', 'Cupuaçu 500ml',
      'Ninho 400ml', 'Ninho 500ml'
    ];

    const acompanhamentosLista = {
      "Coberturas": ['Leite Condensado', 'Morango (Cobertura)', 'Chocolate'],
      "Farinhas": ['Leite', 'Paçoca', 'Granola'],
      "Guloseimas": ['Confete', 'Chocoball', 'Jujuba'],
      "Frutas": ['Banana', 'Uva', 'Morango (Fruta)'],
      "Adicionais": ['Goma Ácida', 'Goma de Amora', 'Canudinho', 'Marshmallow', 'Fini']
    };

    const produtosDiv = document.getElementById("produtos");
    Object.keys(precos).forEach(prod => {
      const label = document.createElement("label");
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.name = "produto";
      checkbox.value = prod;
      checkbox.onclick = mostrarAcompanhamentos;
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(prod + " - R$ " + precos[prod].toFixed(2)));
      produtosDiv.appendChild(label);
    });

    const acompDiv = document.getElementById("acompanhamentos");
    for (const [categoria, itens] of Object.entries(acompanhamentosLista)) {
      const h4 = document.createElement("h4");
      h4.textContent = categoria;
      acompDiv.appendChild(h4);
      itens.forEach(acomp => {
        const label = document.createElement("label");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.name = "acompanhamento";
        checkbox.value = acomp;
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(acomp));
        acompDiv.appendChild(label);
      });
    }

    function mostrarAcompanhamentos() {
      const selecionados = Array.from(document.querySelectorAll('input[name="produto"]:checked'));
      const nomes = selecionados.map(p => p.value);
      const deveMostrar = nomes.some(nome => produtosComAcompanhamentos.includes(nome));
      document.getElementById("acompanhamentos").style.display = deveMostrar ? "block" : "none";
    }

    function adicionarItens() {
      const produtosSelecionados = Array.from(document.querySelectorAll('input[name="produto"]:checked'));
      const acompSelecionados = Array.from(document.querySelectorAll('input[name="acompanhamento"]:checked'));
      const qtd = parseInt(document.getElementById("quantidade").value);

      produtosSelecionados.forEach(p => {
        sacola.push({
          produto: p.value,
          qtd: qtd,
          preco: precos[p.value] * qtd,
          acompanhamentos: produtosComAcompanhamentos.includes(p.value) ? acompSelecionados.map(a => a.value) : []
        });
      });

      atualizarSacola();
      limparCampos();
    }

    function atualizarSacola() {
      const lista = document.getElementById("lista-sacola");
      lista.innerHTML = "";
      sacola.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = `${item.qtd}x ${item.produto} - R$ ${item.preco.toFixed(2)}`;
        lista.appendChild(li);
      });
    }

    function limparCampos() {
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
      document.getElementById("quantidade").value = 1;
      document.getElementById("acompanhamentos").style.display = "none";
    }

    function fecharPedido() {
      const container = document.getElementById("pedido-finalizado");
      const detalhes = document.getElementById("detalhes-pedido");
      detalhes.innerHTML = "";
      document.getElementById("resumo").style.display = "none";

      if (sacola.length === 0) {
        alert("Sua sacola está vazia.");
        return;
      }

      let total = 0;

      sacola.forEach(item => {
        const div = document.createElement("div");
        div.innerHTML = `<strong>${item.qtd}x ${item.produto}</strong> - R$ ${item.preco.toFixed(2)}<br>`;

        const categorias = acompanhamentosLista;
        for (const [categoria, itens] of Object.entries(categorias)) {
          const filtrados = item.acompanhamentos.filter(acomp => itens.includes(acomp));
          if (filtrados.length > 0) {
            div.innerHTML += `<strong>${categoria}:</strong> ${filtrados.join(", ")}<br>`;
          }
        }

        total += item.preco;
        div.innerHTML += `<br>`;
        detalhes.appendChild(div);
      });

      const totalDiv = document.createElement("div");
      totalDiv.innerHTML = `<strong>Total do pedido:</strong> R$ ${total.toFixed(2)}`;
      detalhes.appendChild(totalDiv);

      container.style.display = "block";
    }


    function recomecar() {
      sacola.length = 0;
      document.getElementById("lista-sacola").innerHTML = "";
      document.getElementById("detalhes-pedido").innerHTML = "";
      document.getElementById("pedido-finalizado").style.display = "none";
      document.getElementById("resumo").style.display = "block";
      limparCampos();
    }
  </script>
</body>
</html>
